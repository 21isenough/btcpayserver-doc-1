<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Raspberry Pi 4 Deployment | BTCPay Server</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta property="og:site_name" content="BTCPay Server">
    <meta property="og:title" content="Raspberry Pi 4 Deployment">
    <meta property="og:description" content="This document guides you step by step on how to run BTCPay Server on a Raspberry Pi 4. See here the Raspberry Pi 3 instructions./RPi3.md">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.btcpayserver.org/Deployment/RPi4/">
    <meta property="og:image" content="https://docs.btcpayserver.org/card.png">
    <meta name="twitter:title" content="Raspberry Pi 4 Deployment">
    <meta name="twitter:description" content="This document guides you step by step on how to run BTCPay Server on a Raspberry Pi 4. See here the Raspberry Pi 3 instructions./RPi3.md">
    <meta name="twitter:url" content="https://docs.btcpayserver.org/Deployment/RPi4/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://docs.btcpayserver.org/card.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="BTCPay Server">
    <meta name="twitter:creator" content="btcpayserver">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="BTCPay Server">
    <meta property="article:tag" content="BTCPay Server">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.e56aa0e1.css" as="style"><link rel="preload" href="/assets/js/app.6b8fb39a.js" as="script"><link rel="preload" href="/assets/js/4.7b91ed22.js" as="script"><link rel="preload" href="/assets/js/10.9b0e42f2.js" as="script"><link rel="preload" href="/assets/js/1.81f8f532.js" as="script"><link rel="preload" href="/assets/js/27.dceb8469.js" as="script"><link rel="prefetch" href="/assets/js/100.9616c454.js"><link rel="prefetch" href="/assets/js/101.268c5e73.js"><link rel="prefetch" href="/assets/js/102.597e25fe.js"><link rel="prefetch" href="/assets/js/103.a60f7685.js"><link rel="prefetch" href="/assets/js/104.25523ca1.js"><link rel="prefetch" href="/assets/js/105.92972029.js"><link rel="prefetch" href="/assets/js/106.83e25cf0.js"><link rel="prefetch" href="/assets/js/107.816681e7.js"><link rel="prefetch" href="/assets/js/11.7a83f562.js"><link rel="prefetch" href="/assets/js/12.d4516a2a.js"><link rel="prefetch" href="/assets/js/13.79970a3e.js"><link rel="prefetch" href="/assets/js/14.acf7d797.js"><link rel="prefetch" href="/assets/js/15.b97d5916.js"><link rel="prefetch" href="/assets/js/16.24fb489a.js"><link rel="prefetch" href="/assets/js/17.001cf910.js"><link rel="prefetch" href="/assets/js/18.3d24fcfb.js"><link rel="prefetch" href="/assets/js/19.b9d9ee3c.js"><link rel="prefetch" href="/assets/js/20.c8557780.js"><link rel="prefetch" href="/assets/js/21.63c97d6c.js"><link rel="prefetch" href="/assets/js/22.5288f415.js"><link rel="prefetch" href="/assets/js/23.fd4b27d5.js"><link rel="prefetch" href="/assets/js/24.ba53e95d.js"><link rel="prefetch" href="/assets/js/25.d990f52e.js"><link rel="prefetch" href="/assets/js/26.93895e3b.js"><link rel="prefetch" href="/assets/js/28.a749e28d.js"><link rel="prefetch" href="/assets/js/29.2a33dff1.js"><link rel="prefetch" href="/assets/js/30.d6a16e45.js"><link rel="prefetch" href="/assets/js/31.b216758f.js"><link rel="prefetch" href="/assets/js/32.4556543c.js"><link rel="prefetch" href="/assets/js/33.eb594c2b.js"><link rel="prefetch" href="/assets/js/34.f9f2ec90.js"><link rel="prefetch" href="/assets/js/35.427c2a78.js"><link rel="prefetch" href="/assets/js/36.dc056925.js"><link rel="prefetch" href="/assets/js/37.f786105c.js"><link rel="prefetch" href="/assets/js/38.e4e4271c.js"><link rel="prefetch" href="/assets/js/39.3cc0f6a1.js"><link rel="prefetch" href="/assets/js/40.dcff7667.js"><link rel="prefetch" href="/assets/js/41.6f100b74.js"><link rel="prefetch" href="/assets/js/42.06efd6c8.js"><link rel="prefetch" href="/assets/js/43.05fbbf5e.js"><link rel="prefetch" href="/assets/js/44.027a3a75.js"><link rel="prefetch" href="/assets/js/45.9f60de1a.js"><link rel="prefetch" href="/assets/js/46.95fcc40d.js"><link rel="prefetch" href="/assets/js/47.baff4e33.js"><link rel="prefetch" href="/assets/js/48.d53c1458.js"><link rel="prefetch" href="/assets/js/49.be49ceb4.js"><link rel="prefetch" href="/assets/js/5.6a77b07c.js"><link rel="prefetch" href="/assets/js/50.2b914f8b.js"><link rel="prefetch" href="/assets/js/51.0ffefcc4.js"><link rel="prefetch" href="/assets/js/52.6b939975.js"><link rel="prefetch" href="/assets/js/53.7a6f54f0.js"><link rel="prefetch" href="/assets/js/54.0481986a.js"><link rel="prefetch" href="/assets/js/55.9ba6fc62.js"><link rel="prefetch" href="/assets/js/56.efd81b9a.js"><link rel="prefetch" href="/assets/js/57.cfb0f0aa.js"><link rel="prefetch" href="/assets/js/58.209b2917.js"><link rel="prefetch" href="/assets/js/59.f58e2788.js"><link rel="prefetch" href="/assets/js/6.04d52061.js"><link rel="prefetch" href="/assets/js/60.60012b11.js"><link rel="prefetch" href="/assets/js/61.2616e0ad.js"><link rel="prefetch" href="/assets/js/62.46fe977b.js"><link rel="prefetch" href="/assets/js/63.5a2accc6.js"><link rel="prefetch" href="/assets/js/64.b2a21436.js"><link rel="prefetch" href="/assets/js/65.4e60619e.js"><link rel="prefetch" href="/assets/js/66.1e02ae53.js"><link rel="prefetch" href="/assets/js/67.c1dc8fb3.js"><link rel="prefetch" href="/assets/js/68.b796485a.js"><link rel="prefetch" href="/assets/js/69.2f1cc0d3.js"><link rel="prefetch" href="/assets/js/7.493c8802.js"><link rel="prefetch" href="/assets/js/70.2fc3fa32.js"><link rel="prefetch" href="/assets/js/71.0816b348.js"><link rel="prefetch" href="/assets/js/72.8ebb3e84.js"><link rel="prefetch" href="/assets/js/73.651552a9.js"><link rel="prefetch" href="/assets/js/74.d6ef53e7.js"><link rel="prefetch" href="/assets/js/75.98a6d8a1.js"><link rel="prefetch" href="/assets/js/76.e0e847e9.js"><link rel="prefetch" href="/assets/js/77.f169857d.js"><link rel="prefetch" href="/assets/js/78.568cf76b.js"><link rel="prefetch" href="/assets/js/79.c2f17a38.js"><link rel="prefetch" href="/assets/js/8.82b2af93.js"><link rel="prefetch" href="/assets/js/80.5aecad3c.js"><link rel="prefetch" href="/assets/js/81.02556d83.js"><link rel="prefetch" href="/assets/js/82.288836dc.js"><link rel="prefetch" href="/assets/js/83.425698e3.js"><link rel="prefetch" href="/assets/js/84.9380e80b.js"><link rel="prefetch" href="/assets/js/85.59536d7a.js"><link rel="prefetch" href="/assets/js/86.d250ea17.js"><link rel="prefetch" href="/assets/js/87.b03497f4.js"><link rel="prefetch" href="/assets/js/88.b75d7aad.js"><link rel="prefetch" href="/assets/js/89.bc07f251.js"><link rel="prefetch" href="/assets/js/9.6ed0926d.js"><link rel="prefetch" href="/assets/js/90.1ca7f293.js"><link rel="prefetch" href="/assets/js/91.36ad1c6e.js"><link rel="prefetch" href="/assets/js/92.2f8278df.js"><link rel="prefetch" href="/assets/js/93.a2b8cf01.js"><link rel="prefetch" href="/assets/js/94.b151241b.js"><link rel="prefetch" href="/assets/js/95.bbde881a.js"><link rel="prefetch" href="/assets/js/96.5b5f029b.js"><link rel="prefetch" href="/assets/js/97.946bce86.js"><link rel="prefetch" href="/assets/js/98.35259f02.js"><link rel="prefetch" href="/assets/js/99.d91e14e6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f35ee79e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e56aa0e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server" class="logo"> <span class="site-name can-hide">BTCPay Server</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide.html" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link router-link-active">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <button type="button" class="btcpay-theme-switch"><svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path transform="translate(1 1)" d="M2.72 0A3.988 3.988 0 000 3.78c0 2.21 1.79 4 4 4 1.76 0 3.25-1.14 3.78-2.72-.4.13-.83.22-1.28.22-2.21 0-4-1.79-4-4 0-.45.08-.88.22-1.28z" class="btcpay-theme-switch-dark"></path><path transform="translate(1 1)" d="M4 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 0 4 0zM1.5 1c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM.5 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM1.5 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 7 4 7z" class="btcpay-theme-switch-light"></path></svg></button></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <nav class="nav-links"><div class="nav-item"><a href="/Guide.html" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link router-link-active">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/" aria-current="page" class="sidebar-link">Choosing a Deployment Method</a></li><li><a href="/Deployment/ThirdPartyHosting/" class="sidebar-link">Third-party hosting</a></li><li><a href="/Configurator/" class="sidebar-link">Deploy BTCPay with Configurator</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Docker/" class="sidebar-link">Introduction</a></li><li><a href="/Deployment/LunaNode/" class="sidebar-link">Web Deployment</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Deployment/Azure" class="sidebar-heading clickable"><span>Azure</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Deployment/GoogleCloud/" class="sidebar-link">Google Cloud Deployment</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Deployment/Hardware" class="sidebar-heading clickable"><span>Hardware Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Deployment/RaspberryPi" class="sidebar-heading clickable open"><span>Raspberry Pi Deployment</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/RPi3/" class="sidebar-link">Raspberry Pi 3 Deployment</a></li><li><a href="/Deployment/RPi4/" aria-current="page" class="active sidebar-link">Raspberry Pi 4 Deployment</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker Plugins</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Manual Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/ManualDeployment/" class="sidebar-link">Minimal manual setup</a></li><li><a href="/Deployment/ManualDeploymentExtended/" class="sidebar-link">Extended Manual Setup</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="raspberry-pi-4-deployment"><a href="#raspberry-pi-4-deployment" class="header-anchor">#</a> Raspberry Pi 4 Deployment</h1> <p>This document guides you step by step on <strong>how to run BTCPay Server on a Raspberry Pi 4</strong>. See here the <a href="/Deployment/RPi3/">Raspberry Pi 3 instructions</a></p> <p>The newly released <strong>Raspberry Pi 4</strong> is currently the best low-cost single-board computer available. You can <strong>use a Raspberry Pi 4 to run your BTCPay Server</strong> at home for around $150 worth of parts, described below.</p> <h2 id="required-hardware"><a href="#required-hardware" class="header-anchor">#</a> Required Hardware</h2> <h3 id="raspberry-pi-4"><a href="#raspberry-pi-4" class="header-anchor">#</a> Raspberry Pi 4</h3> <ul><li><a href="https://www.canakit.com/raspberry-pi-4-4gb.html" target="_blank" rel="noopener noreferrer">Raspberry Pi 4 with <strong>4GB RAM</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($55)</li> <li><a href="https://www.amazon.com/dp/B073K14CVB/" target="_blank" rel="noopener noreferrer">Sandisk 16GB SD Card<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($5)</li></ul> <p>Don’t settle for only 1GB or 2GB of RAM. The <strong>4GB RAM</strong> version is harder to find than the other versions, but you absolutely want that <strong>4GB of RAM</strong> for a few extra bucks, and it’s totally worth spending a few extra minutes searching on the Internet to find a vendor that has the 4GB RAM version in stock. You’ll also need an <strong>SD card reader</strong> if you don’t already have one.</p> <h3 id="power-adapters-and-usb-c-cable"><a href="#power-adapters-and-usb-c-cable" class="header-anchor">#</a> Power Adapters and USB-C Cable</h3> <ul><li><a href="https://shop.pimoroni.com/products/raspberry-pi-official-usb-c-power-supply-us?variant=29391144648787" target="_blank" rel="noopener noreferrer">Official Raspberry Pi 4 USB-C Power Adapter 5.1V/3A for US<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($10)</li> <li><a href="https://shop.pimoroni.com/products/raspberry-pi-official-usb-c-power-supply-eu?variant=29391130624083" target="_blank" rel="noopener noreferrer">Official Raspberry Pi 4 USB-C Power Adapter 5.1V/3A for EU<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($10)</li> <li><a href="https://shop.pimoroni.com/products/raspberry-pi-official-usb-c-power-supply-au?variant=29391160737875" target="_blank" rel="noopener noreferrer">Official Raspberry Pi 4 USB-C Power Adapter 5.1V/3A for AU<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($10)</li></ul> <p>Don’t waste your time with random Chinese power adapters from Amazon, or expect that the existing ones you have at home are going to work fine. The Raspberry Pi 4 has issues with unofficial adapters, and for only $10 it’s better to just <strong>get an official adapter</strong> instead of learning this the hard way.</p> <h3 id="cooling-options-passive-vs-active-vs-passiveactive"><a href="#cooling-options-passive-vs-active-vs-passiveactive" class="header-anchor">#</a> Cooling options: Passive vs Active vs Passive+Active</h3> <ul><li><a href="https://shop.pimoroni.com/products/fan-shim" target="_blank" rel="noopener noreferrer">Pimoroni Fan Shim<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($10)</li></ul> <p>Strictly speaking, you don’t actually <strong>need</strong> a cooling solution, but you certainly <strong>want</strong> a cooling solution, because once the Raspberry PI core temperature reaches 70C, it will throttle the CPU down to avoid burning itself up.</p> <h3 id="case-options-naked-vs-protection"><a href="#case-options-naked-vs-protection" class="header-anchor">#</a> Case options: Naked vs. Protection</h3> <ul><li><a href="https://flirc.tv/more/raspberry-pi-4-case" target="_blank" rel="noopener noreferrer">Flirc Heatsink Case<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($12)</li> <li><a href="https://shop.pimoroni.com/products/pibow-coupe-4?variant=29210100105299" target="_blank" rel="noopener noreferrer">Pimoroni Pibow Coupé 4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($9)</li></ul> <p>Of course, using a case is totally optional, but we recommend one to protect your Raspberry Pi over the long-term and prevent random dust from shorting out the pins.</p> <h3 id="data-storage-options-ssd-vs-usb-memory-vs-sd-card"><a href="#data-storage-options-ssd-vs-usb-memory-vs-sd-card" class="header-anchor">#</a> Data storage options: SSD vs USB memory vs SD card</h3> <ul><li><a href="https://www.amazon.com/dp/B073GZBT36/" target="_blank" rel="noopener noreferrer">Samsung 500GB SSD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ($75)</li></ul> <p>The 500GB SSD allows you to keep a full copy of the Bitcoin blockchain, until it grows past 500GB sometime in 2022. At that time, you’ll either have to enable pruning on your Bitcoin node, or upgrade to a 1TB SSD, which will presumably be cheaper then, probably even less than $75. You can also use BTCPay without a full copy of the Bitcoin blockchain.</p> <h3 id="display-options-display-or-headless"><a href="#display-options-display-or-headless" class="header-anchor">#</a> Display options: Display or Headless</h3> <ul><li>Display ($100)</li></ul> <h2 id="assembling-the-raspberry-pi-4-components"><a href="#assembling-the-raspberry-pi-4-components" class="header-anchor">#</a> Assembling the Raspberry Pi 4 components</h2> <ul><li>Important: Attach a heatsink to the CPU! 🔥🔥🔥</li> <li>Connect the SSD to one of the blue colored USB 3 ports</li> <li>Prepare the USB Power Adapter but don’t plug it in yet</li></ul> <figure><img src="/assets/img/RPI4Components.fda5f527.jpeg" alt="RPI4 Components" title="Raspberry Pi 4 Components"></figure> <h2 id="install-linux-on-the-raspberry-pi"><a href="#install-linux-on-the-raspberry-pi" class="header-anchor">#</a> Install Linux on the Raspberry Pi</h2> <p>Start by downloading <a href="https://www.raspberrypi.org/software/operating-systems/" target="_blank" rel="noopener noreferrer">Raspberry Pi OS for Linux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to your existing computer. The “Lite” distribution is fine for BTCPay setup, but if you want to use your Raspberry Pi for other things, you might want the full image.</p> <figure><img src="/assets/img/RPI4Linux.bbede569.png" alt="RPI4 Linux Installation" title="Raspberry Pi 4 Linux Installation"></figure> <h3 id="flash-your-sd-card-with-the-raspberry-pi-os-for-linux"><a href="#flash-your-sd-card-with-the-raspberry-pi-os-for-linux" class="header-anchor">#</a> Flash your SD card with the Raspberry Pi OS for Linux</h3> <ul><li>Extract the downloaded <code>Raspberry Pi OS for Linux</code> zip file</li> <li>Download the latest version of <a href="https://www.balena.io/etcher/" target="_blank" rel="noopener noreferrer">balenaEtcher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and install it.</li> <li>Connect an SD card reader with the SD card inside.</li> <li>Open balenaEtcher and select from your hard drive the Raspberry Pi .img from the extracted zip file you wish to write to the SD card.</li> <li>Select the SD card you wish to write your image to.</li> <li>Review your selections and click 'Flash!' to begin writing data to the SD card.</li></ul> <p>You can find a more in-depth instruction guide to flashing to your SD card at the <a href="https://www.raspberrypi.org/documentation/installation/installing-images" target="_blank" rel="noopener noreferrer">official Raspberry Pi  website<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>If you used balenaEtcher to flash, the SD card will already have been ejected. Simply take the SD card out and put it back in. The SD card should now be labelled as <code>boot</code>. Next, enable SSH at bootup so you can remotely login by creating an empty file in the SD card root folder called <code>ssh</code>. Eject the SD card through your OS before taking it out of the SD card reader.</p> <figure><img src="/assets/img/RPI4Terminal4.eb61f8f2.png" alt="RPI4 Console" title="Raspberry Pi 4 Console"></figure> <h2 id="booting-up-the-raspberry-pi"><a href="#booting-up-the-raspberry-pi" class="header-anchor">#</a> Booting up the Raspberry Pi</h2> <p>After inserting the SD card into the Raspberry Pi, go ahead and connect the power and ethernet, and optionally the display and keyboard if you have those. It should boot up and get an IP address using DHCP. You can try searching for it with <code>ping raspberrypi.local</code> on your desktop PC, but if that doesn’t work you will need to login to your router to find its IP address.</p> <p>The IP address that my Raspberry Pi got was 192.168.1.5 so I SSH’d to that:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token number">192.168</span>.1.5 -l pi
</code></pre></div><p>The default password for the “pi” user is “raspberry”. After SSH’ing in, the first thing I want to do is check the device’s CPU temperature to make sure the cooling system are working correctly. Press Ctrl-c to stop monitoring:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">watch</span> -n1 vcgencmd measure_temp
</code></pre></div><p>Next, let’s change the password for the “pi” user:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">passwd</span> pi
</code></pre></div><figure><img src="/assets/img/RPI4Terminal4.eb61f8f2.png" alt="RPI4 Console" title="Raspberry Pi 4 Console"></figure> <p>After that, switch to the <code>root</code> user, which we will use for the remaining part of the tutorial:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
</code></pre></div><h2 id="configuring-the-storage"><a href="#configuring-the-storage" class="header-anchor">#</a> Configuring the storage</h2> <p>We recommend to disable swap to prevent burning out your SD card:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>dphys-swapfile swapoff
dphys-swapfile uninstall
update-rc.d dphys-swapfile remove
systemctl disable dphys-swapfile
</code></pre></div><figure><img src="/assets/img/RPI4Terminal5.2c8380f5.png" alt="RPI4 Console" title="Raspberry Pi 4 Console"></figure> <p>Partition your SSD:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">fdisk</span> /dev/sda
<span class="token comment"># type 'p' to list existing partitions</span>
<span class="token comment"># type 'd' to delete currently selected partitions</span>
<span class="token comment"># type 'n' to create a new partition</span>
<span class="token comment"># type 'w' to write the new partition table and exit fdisk</span>
</code></pre></div><p>Format the new partition on your SSD:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mkfs.ext4 /dev/sda1
</code></pre></div><p>Configure the SSD partition to auto-mount at bootup:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mkfs.ext4 /dev/sda1
<span class="token function">mkdir</span> /mnt/usb
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">sudo</span> blkid -s UUID -o value /dev/sda1<span class="token variable">)</span></span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;UUID=<span class="token variable">$UUID</span> /mnt/usb ext4 defaults,noatime,nofail 0 0&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> -a /etc/fstab
<span class="token function">mount</span> -a
</code></pre></div><p>While you’re editing <code>/etc/fstab</code> add a RAM filesystem for logs (optional).
This is also to prevent burning out your SD card too quickly:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'none /var/log tmpfs size=10M,noatime 0 0'</span> <span class="token operator">&gt;&gt;</span> /etc/fstab
</code></pre></div><p>Mount the SSD partition and create a symlink for docker to use the SSD:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> /mnt/usb/docker
<span class="token function">ln</span> -s /mnt/usb/docker /var/lib/docker
</code></pre></div><h2 id="configuring-the-firewall"><a href="#configuring-the-firewall" class="header-anchor">#</a> Configuring the firewall</h2> <p>Upgrade your OS packages to latest:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt</span> upgrade -y <span class="token operator">&amp;&amp;</span> <span class="token function">apt</span> autoremove
</code></pre></div><p>Install a firewall and allow SSH, HTTP, HTTPS, Bitcoin, and Lightning:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> -y ufw
ufw default deny incoming
ufw default allow outgoing
</code></pre></div><p>UFW needs default iptables changes and a reboot for the firewall to work:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>update-alternatives --set iptables /usr/sbin/iptables-legacy
<span class="token function">reboot</span>
</code></pre></div><p>Switch back to root after rebooting:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
</code></pre></div><p>This command allows SSH connections from internal networks only:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw allow from <span class="token number">10.0</span>.0.0/8 to any port <span class="token number">22</span> proto tcp
ufw allow from <span class="token number">172.16</span>.0.0/12 to any port <span class="token number">22</span> proto tcp
ufw allow from <span class="token number">192.168</span>.0.0/16 to any port <span class="token number">22</span> proto tcp
ufw allow from <span class="token number">169.254</span>.0.0/16 to any port <span class="token number">22</span> proto tcp
ufw allow from fc00::/7 to any port <span class="token number">22</span> proto tcp
ufw allow from fe80::/10 to any port <span class="token number">22</span> proto tcp
ufw allow from ff00::/8 to any port <span class="token number">22</span> proto tcp
</code></pre></div><p>These ports need to be accessible from anywhere (The default subnet is 'any' unless you specify one):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw allow <span class="token number">80</span>/tcp
ufw allow <span class="token number">443</span>/tcp
ufw allow <span class="token number">8333</span>/tcp
ufw allow <span class="token number">9735</span>/tcp
</code></pre></div><p>Enable your firewall:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw <span class="token builtin class-name">enable</span>
</code></pre></div><p>Verify your configuration:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw status
</code></pre></div><h2 id="setup-btcpay-server"><a href="#setup-btcpay-server" class="header-anchor">#</a> Setup BTCPay Server</h2> <p>Download BTCPay Server from GitHub:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token comment"># ensure we are in root home</span>
<span class="token function">apt</span> <span class="token function">install</span> -y fail2ban <span class="token function">git</span>
<span class="token function">git</span> clone https://github.com/btcpayserver/btcpayserver-docker
<span class="token builtin class-name">cd</span> btcpayserver-docker
</code></pre></div><p>Configure BTCPay by setting some <a href="https://github.com/btcpayserver/btcpayserver-docker#environment-variables" target="_blank" rel="noopener noreferrer">environment variables<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAY_HOST</span><span class="token operator">=</span><span class="token string">&quot;raspberrypi.local&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">REVERSEPROXY_DEFAULT_HOST</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAY_HOST</span>&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NBITCOIN_NETWORK</span><span class="token operator">=</span><span class="token string">&quot;mainnet&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_CRYPTO1</span><span class="token operator">=</span><span class="token string">&quot;btc&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_LIGHTNING</span><span class="token operator">=</span><span class="token string">&quot;lnd&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_REVERSEPROXY</span><span class="token operator">=</span><span class="token string">&quot;nginx&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;opt-more-memory&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAY_ENABLE_SSH</span><span class="token operator">=</span>true
</code></pre></div><p>If you want to use multiple hostnames, add them via the optional <code>BTCPAY_ADDITIONAL_HOSTS</code> variable:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAY_ADDITIONAL_HOSTS</span><span class="token operator">=</span><span class="token string">&quot;btcpay.YourDomain.com,btcpay.local&quot;</span>
</code></pre></div><p>In case you want to restrict access to your local network only, please note that you need to use a <code>.local</code> domain.</p> <p>Run the BTCPay installation:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><p>It should be up and running within a few minutes. Try opening http://raspberrypi.local in your web browser. If everything is correct, you will see BTCPay Server front page.</p> <p>Now, you just need to wait a day or so for the Bitcoin blockchain to <a href="/FAQ/Synchronization/">sync and full verify</a>. The bottom of the BTCPay Server web GUI will show a pop-up dialog box to monitor the progress.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/edit/master/docs/Deployment/RPi4.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20Raspberry%20Pi%204%20Deployment&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22Raspberry%20Pi%204%20Deployment%22%20page%20(%60%2FDeployment%2FRPi4%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Deployment/RPi3/" class="prev">
        Raspberry Pi 3 Deployment
      </a></span> <span class="next"><a href="/Transmuter/DCA/">
        Dollar Cost Average Preset
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6b8fb39a.js" defer></script><script src="/assets/js/4.7b91ed22.js" defer></script><script src="/assets/js/10.9b0e42f2.js" defer></script><script src="/assets/js/1.81f8f532.js" defer></script><script src="/assets/js/27.dceb8469.js" defer></script>
  </body>
</html>
